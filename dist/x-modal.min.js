!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("XModal",[],t):"object"==typeof exports?exports.XModal=t():e.XModal=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function o(e){if(!e||"object"!=typeof e)return"";var t="";for(var n in e){if(!n||!e[n])return;t+=n+": "+e[n]+";"}return t}function r(e,t){e=e||{};var n=e.id||""+d++,r=Array.isArray(e.cls)?e.cls.join(" "):e.cls,l=o(e.style),i=document.createElement("div");i.setAttribute("id","modal-"+n),i.className="x-modal-container",i.style.position="fixed",i.style.top=i.style.left=i.style.right=i.style.bottom=0,i.style.zIndex=a++,i.style.overflowY="auto",i.style.transition="all .25s ease-in-out",e.maskbg!==!1&&(i.style.background="string"==typeof e.maskbg?e.maskbg:"rgba(0,0,0,.5)"),e.closable!==!1&&(i.onclick=function(e){(e.target||e.srcElement)===i&&u.close()});var s=document.createElement("div");l&&s.setAttribute("style",l),r?s.className="x-modal "+r:s.setAttribute("class","x-modal"),s.style.position="relative",s.style.boxSizing="border-box",s.style.transition="all .15s ease-in-out",s.style.transform="scale(.6,.6)",s.style.opacity=0,s.style.width="number"==typeof e.width?e.width+"px":e.width,s.style.height="number"==typeof e.height?e.height+"px":e.height,e.background&&(s.style.background=e.background),e.shadow!==!1&&(s.style.boxShadow="string"==typeof e.shadow?e.shadow:"0 5px 15px rgba(0,0,0,.5)"),s.style.margin=(+e.margin||0)+"px auto",i.appendChild(s);var c,u={id:n,target:s,body:s,container:i,open:function(){u.onOpen&&u.onOpen(u),document.body.appendChild(i),setTimeout(function(){if(s.style.opacity=1,s.style.transform="scale(1,1)",e.closable!==!1){var t=!s.querySelectorAll("*[modal-close], .modal-close").length;if("closebtn"in e&&(t=e.closebtn),t){var n=document.createElement("div");n.style.position="absolute",n.style.right="20px",n.style.top="20px",n.style.cursor="pointer",n.style.opacity="0.5",n.style.zIndex=10001,n.innerHTML='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAAaRJREFUSA3tlltSwzAMRcsbVgBsC9gqfPBqYGNwzySn48kkrfP4a++MYsuSriJbcbvZnHDsO3CZDTifsQnEELsYFxMYpviO0r7E8tBZayrQhxhiJ8Hg50T9RX4irjkOEWpjJIZYOIC2Vht5eqb3sW8jEHxGbiJgiMS129jxJYZYOICcrbbn6Tkxvkcgooqh5GXS386XmJIjaj0kJFkTIflHxHWIJb/KvKx06AXjUg+TQERSt/CuoGDOtmKj0usIMLbVZjwlYPyOkIBtP+vERsJW+kZdDglpniZC8rdOmDcRbEDfVlvh6XlS6WuEhAhzoY/66Fjd5j0Gkgu3XH3V0e2jkTxTKrXyJnMbTt8sLYNEjNsI28sIqLaJuFb6Znk+JCpvpK/Q2UgwM7fb+eRW+4YhLm8kX6a8QFjzO+cofDF9s1QHu5PAQzeS5OUNR4zrch3MbKc/xrOsdN+NZJLyhqNyOICcrTbylMSfRRrJt9Y2FKqNsYnQcJN+FuO/w1Nm/rRJvDMOTPThjwCxi2HFNURTfEf5qKDqfHoMxFh9z3RSj2UH/gFDp0r+/I0dzwAAAABJRU5ErkJggg==" title="close">',s.appendChild(n),n.onclick=function(){u.close()}}c&&clearInterval(c),c=setInterval(function(){[].forEach.call(i.querySelectorAll("*[modal-close], .modal-close"),function(e){e.onclick=function(){u.close()}})},250)}},10)},close:function(){c&&clearInterval(c),u.onClose&&u.onClose(u),s.style.opacity=0,s.style.transform="scale(.6,.6)",setTimeout(function(){try{document.body.removeChild(i)}catch(e){}},200)}};t(null,u)}function l(e,t){var n=e.src,o=e.html,r=e.el;return"string"!=typeof r||(r=document.querySelector(r))?o?t(null,o):r?t(null,r):n?s(n,t):void t():t(new Error("not found element: "+e.el))}function i(e,t,o){var r=t.shell,l=t.title,i=t.icon,s=t.btns;if(r!==!1&&(l||i||s)&&(r=!0),r){var a=(r.cls,r.style,n(6));e.target.innerHTML=a,e.target=e.body.querySelector(".x-modal-shell-body"),e.shell={shell:e.body.querySelector(".x-modal-shell"),header:e.body.querySelector(".x-modal-shell-header"),body:e.body.querySelector(".x-modal-shell-body"),footer:e.body.querySelector(".x-modal-shell-footer")},l||i||(e.shell.header.display="none"),s&&s.length||(e.shell.footer.display="none"),i&&e.shell.header.appendChild(function(){var e=document.createElement("span");return e.className="x-modal-shell-icon",e.innerHTML=i,e}()),l&&e.shell.header.appendChild(function(){var e=document.createElement("h3");return e.className="x-modal-shell-title",e.innerHTML=l,e}()),(s||[]).forEach(function(t){e.shell.footer.appendChild(function(){var e=document.createElement("a");return e.className="x-modal-shell-btn",e.innerHTML=t.icon+" "+t.text,e}())})}o&&(e.target.innerHTML="",o.nodeType&&e.target.appendChild(o),"string"==typeof o?e.target.innerHTML=o:"number"==typeof o.length&&[].forEach.call(o,function(t){e.target.appendChild(t)}))}var s=n(1);n(2);var a=1e4,c=function(){var e=document.createElement("div");return e.setAttribute("class","x-modal-mask"),e.style.position="fixed",e.style.top=e.style.bottom=e.style.left=e.style.right=0,e.style.opacity=0,e.style.zIndex=a++,e.style.overflow="hidden",{show:function(){return console.log("mask.show"),e.parentNode!==document.body&&document.body.appendChild(e),e.style.display="block",e.style.opacity=1,document.body.style.overflowY="hidden",this},hide:function(){return console.log("mask.hide"),e.style.opacity=0,setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e),document.body.style.overflowY=""},200),this}}}(),d=100,u=[],f=e.exports={open:function(e,t){"string"==typeof e&&(e={html:e}),e=e||{};var n=e.id?f.get(e.id):null;return n&&l({src:e.src,html:e.html,el:e.el},function(o,r){return o?t(o):(i(n,e,r),n.open(),void t(null,n))}),l({src:e.src,html:e.html,el:e.el},function(n,o){return n?t(n):void r({id:e.id,cls:e.cls,style:e.style,background:e.background,closebtn:e.closebtn,closable:e.closable,shadow:e.shadow,maskbg:e.maskbg,width:e.width||700,height:e.height,margin:e.margin||50},function(n,r){return n?t(n):(r.onOpen=function(e){~u.indexOf(e)&&u.splice(u.indexOf(e),1);var t=u[u.length-1];u.push(e),t&&(t.body.style.transform="scale(.85, .85)",t.body.style.opacity=".9"),c.show()},r.onClose=function(e){if(~u.indexOf(e)&&u.splice(u.indexOf(e),1),u.length){var t=u[u.length-1];t.body.style.transform="scale(1, 1)",t.body.style.opacity="1"}else c.hide()},i(r,e,o),r.open(),void t(null,r))})}),this},current:function(){return u[u.length-1]},ids:function(){var e=[];return u.forEach(function(t){e.push(t.id)}),e},get:function(e){if(!arguments.length)return f.current();var t;return u.forEach(function(n){n.id===e&&(t=n)}),t},close:function(e){return arguments.length||f.closeAll(),u.forEach(function(t){t.id===e&&t.close()}),this},closeAll:function(){return u.forEach(function(e){e.close()}),this}}},function(e,t){e.exports=function(e,t){var n=win.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("GET",e),n.onreadystatechange=function(e){if(4==this.readyState){var n=this.status,o=this.responseText;0===n||n>=200&&n<300?t(null,o):t(new Error("["+n+"] "+o))}},n.send()}},function(e,t,n){var o=n(3);"string"==typeof o&&(o=[[e.id,o,""]]);n(5)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".x-modal-shell {\n  background: #fff;\n}\n",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},r=0;r<this.length;r++){var l=this[r][0];"number"==typeof l&&(o[l]=!0)}for(r=0;r<t.length;r++){var i=t[r];"number"==typeof i[0]&&o[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},function(e,t,n){function o(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=p[o.id];if(r){r.refs++;for(var l=0;l<r.parts.length;l++)r.parts[l](o.parts[l]);for(;l<o.parts.length;l++)r.parts.push(c(o.parts[l],t))}else{for(var i=[],l=0;l<o.parts.length;l++)i.push(c(o.parts[l],t));p[o.id]={id:o.id,refs:1,parts:i}}}}function r(e){for(var t=[],n={},o=0;o<e.length;o++){var r=e[o],l=r[0],i=r[1],s=r[2],a=r[3],c={css:i,media:s,sourceMap:a};n[l]?n[l].parts.push(c):t.push(n[l]={id:l,parts:[c]})}return t}function l(e,t){var n=m(),o=v[v.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),v.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function i(e){e.parentNode.removeChild(e);var t=v.indexOf(e);t>=0&&v.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",l(e,t),t}function a(e){var t=document.createElement("link");return t.rel="stylesheet",l(e,t),t}function c(e,t){var n,o,r;if(t.singleton){var l=b++;n=g||(g=s(t)),o=d.bind(null,n,l,!1),r=d.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(t),o=f.bind(null,n),r=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),o=u.bind(null,n),r=function(){i(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}function d(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=A(t,r);else{var l=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(l,i[t]):e.appendChild(l)}}function u(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,o=t.sourceMap;o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([n],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(r),l&&URL.revokeObjectURL(l)}var p={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},y=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=h(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,b=0,v=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=y()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=r(e);return o(n,t),function(e){for(var l=[],i=0;i<n.length;i++){var s=n[i],a=p[s.id];a.refs--,l.push(a)}if(e){var c=r(e);o(c,t)}for(var i=0;i<l.length;i++){var a=l[i];if(0===a.refs){for(var d=0;d<a.parts.length;d++)a.parts[d]();delete p[a.id]}}}};var A=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports='<div class="x-modal-shell">\n  <div class="x-modal-shell-header"></div>\n  <div class="x-modal-shell-body"></div>\n  <div class="x-modal-shell-footer"></div>\n</div>'}])});